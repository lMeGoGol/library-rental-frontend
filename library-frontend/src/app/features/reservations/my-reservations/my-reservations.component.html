<section>
  <div class="section-title">üîî –ú–æ—ó –±—Ä–æ–Ω—ñ</div>
  <div *ngIf="loading" class="card loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
  <div *ngIf="!loading && reservations.length" class="card card-table">
    <table class="lib-table">
      <thead>
        <tr>
          <th>ID –±—Ä–æ–Ω—ñ</th>
          <th>ID –∫–Ω–∏–≥–∏</th>
          <th>–ö–Ω–∏–≥–∞</th>
          <th>–î–Ω—ñ–≤</th>
          <th>–°—Ç–∞—Ç—É—Å</th>
          <th>–ó–∞–ª–∏—à–∏–ª–æ—Å—å</th>
          <th *ngIf="showCancelCol">–ü—Ä–∏—á–∏–Ω–∞</th>
          <th style="width:120px;">–î—ñ—ó</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of reservations; trackBy: trackById">
          <td class="mono" title="{{ r.id }}">‚Ä¶{{ r.id.slice(-6) }}</td>
          <td class="mono" title="{{ getBookId(r) }}">‚Ä¶{{ getBookId(r).slice(-6) }}</td>
          <td>{{ r.book | bookTitle }}</td>
          <td>{{ r.desiredDays }}</td>
          <td><span class="badge" [class.success]="r.status==='fulfilled'" [class.warn]="r.status==='pending'" [class.danger]="r.status==='cancelled'">{{ r.status==='pending' ? '–æ—á—ñ–∫—É—î' : (r.status==='fulfilled' ? '–≤–∏–∫–æ–Ω–∞–Ω–æ' : '—Å–∫–∞—Å–æ–≤–∞–Ω–æ') }}</span></td>
          <td>{{ getRemaining(r) }}</td>
          <td *ngIf="showCancelCol">{{ r.cancelReason || (r.status==='cancelled' ? '‚Äî' : '') }}</td>
          <td>
            <button class="btn danger" *ngIf="r.status==='pending'" (click)="cancel(r)">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
          </td>
        </tr>
      </tbody>
    </table>
  <app-pager [page]="page" [limit]="limit" [length]="reservations.length" [total]="total" (prev)="prevPage()" (next)="nextPage()" />
  </div>
  <div *ngIf="!loading && !reservations.length" class="card" style="font-size:.85rem;">–ù–µ–º–∞—î –±—Ä–æ–Ω—ñ</div>
</section>
